{"version":3,"sources":["../lib/getMetadata.js"],"names":["require","join","npa","gatherMetadata","getMetadata","componentLibs","outputDir","metadata","i","length","name","path","meta","moduleName","namespace","module","exports"],"mappings":"AAAA;;;;eAEiBA,QAAQ,MAAR,C;IAATC,I,YAAAA,I;;AACR,IAAMC,MAAMF,QAAQ,iBAAR,CAAZ;;gBAC2BA,QAAQ,gBAAR,C;IAAnBG,c,aAAAA,c;;AAER;;;;;AAKA;;;;;;;;AAMA,IAAMC;AAAA,qEAAc,iBAAOC,aAAP,EAAsBC,SAAtB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACZC,oBADY,GACD,EADC;AAGTC,aAHS,GAGL,CAHK;;AAAA;AAAA,kBAGFA,IAAIH,cAAcI,MAHhB;AAAA;AAAA;AAAA;;AAAA,mBAICP,IAAIG,cAAcG,CAAd,CAAJ,CAJD,EAIRE,IAJQ,QAIRA,IAJQ;AAKVC,gBALU,GAKHV,KAAKK,SAAL,EAAgB,cAAhB,EAAgCI,IAAhC,CALG;AAAA;AAAA,mBAMGP,eAAeQ,IAAf,CANH;;AAAA;AAMVC,gBANU;;;AAQhBA,iBAAKC,UAAL,GAAkBH,IAAlB;AACAH,qBAASK,KAAKE,SAAd,IAA2BF,IAA3B;;AATgB;AAGwBJ,eAHxB;AAAA;AAAA;;AAAA;AAAA,6CAYXD,QAZW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAd;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAeAQ,OAAOC,OAAP,GAAiBZ,WAAjB","file":"getMetadata.js","sourcesContent":["'use strict';\n\nconst { join } = require('path');\nconst npa = require('npm-package-arg');\nconst { gatherMetadata } = require('@jssy/metadata');\n\n/**\n * @typedef {LibMetadata} CodegenLibMetadata\n * @property {string} moduleName\n */\n\n/**\n *\n * @param {Array<string>} componentLibs\n * @param {string} outputDir\n * @return {Promise<Object<string, CodegenLibMetadata>>}\n */\nconst getMetadata = async (componentLibs, outputDir) => {\n  const metadata = {};\n\n  for (let i = 0; i < componentLibs.length; i++) {\n    const { name } = npa(componentLibs[i]);\n    const path = join(outputDir, 'node_modules', name);\n    const meta = await gatherMetadata(path);\n\n    meta.moduleName = name;\n    metadata[meta.namespace] = meta;\n  }\n\n  return metadata;\n};\n\nmodule.exports = getMetadata;\n"]}