{"version":3,"sources":["../lib/Path.js"],"names":["require","INVALID_ID","SEPARATOR","Path","steps","_steps","step","Array","isArray","map","value","join","type","defaultValue","ret","position","i","length","_getFirstValue","StepTypes","COMPONENT_ID","isSystemProp","COMPONENT_PROP_NAME","switchValue","SWITCH","ARRAY_INDEX","OBJECT_KEY","ACTION_INDEX","METHOD_ARG","MUTATION_ARG","FUNCTION_ARG","ROUTE_PARAM_NAME","module","exports"],"mappings":"AAAA;;;;AAIA;;;;;;;;eAEuBA,QAAQ,aAAR,C;IAAfC,U,YAAAA,U;;AAER,IAAMC,YAAY,IAAlB;;IAEMC,I;AACJ,kBAAwB;AAAA,QAAZC,KAAY,uEAAJ,EAAI;;AAAA;;AACtB,SAAKC,MAAL,GAAcD,KAAd;AACD;;;;2BAEME,I,EAAM;AACX,UAAIC,MAAMC,OAAN,CAAcF,IAAd,CAAJ,EAAyB;AACvB,eAAO,IAAIH,IAAJ,8BAAa,KAAKE,MAAlB,sBAA6BC,IAA7B,GAAP;AACD,OAFD,MAEO;AACL,eAAO,IAAIH,IAAJ,8BAAa,KAAKE,MAAlB,IAA0BC,IAA1B,GAAP;AACD;AACF;;;gCAEW;AACV,aAAO,KAAKD,MAAL,CAAYI,GAAZ,CAAgB;AAAA,eAAQH,KAAKI,KAAb;AAAA,OAAhB,EAAoCC,IAApC,CAAyCT,SAAzC,CAAP;AACD;;;mCAEcU,I,EAAMC,Y,EAAc;AACjC,UAAMC,MAAM,EAAEC,UAAU,CAAC,CAAb,EAAgBL,OAAOG,YAAvB,EAAZ;;AAEA,WAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAI,KAAKX,MAAL,CAAYY,MAAhC,EAAwCD,GAAxC,EAA6C;AAC3C,YAAI,KAAKX,MAAL,CAAYW,CAAZ,EAAeJ,IAAf,KAAwBA,IAA5B,EAAkC;AAChCE,cAAIC,QAAJ,GAAeC,CAAf;AACAF,cAAIJ,KAAJ,GAAY,KAAKL,MAAL,CAAYW,CAAZ,EAAeN,KAA3B;AACA;AACD;AACF;;AAED,aAAOI,GAAP;AACD;;;qCAEgB;AACf,aAAO,KAAKI,cAAL,CAAoBf,KAAKgB,SAAL,CAAeC,YAAnC,EAAiDnB,UAAjD,EAA6DS,KAApE;AACD;;;kCAEiC;AAAA,UAAtBW,YAAsB,uEAAP,KAAO;;AAAA,4BACJ,KAAKH,cAAL,CAC1Bf,KAAKgB,SAAL,CAAeG,mBADW,EAE1B,EAF0B,CADI;AAAA,UACxBP,QADwB,mBACxBA,QADwB;AAAA,UACdL,KADc,mBACdA,KADc;;AAMhC,UAAMa,cAAcF,eAAe,aAAf,GAA+B,OAAnD;;AAEA,UACEN,WAAW,CAAX,IACA,KAAKV,MAAL,CAAYU,WAAW,CAAvB,EAA0BH,IAA1B,KAAmCT,KAAKgB,SAAL,CAAeK,MADlD,IAEA,KAAKnB,MAAL,CAAYU,WAAW,CAAvB,EAA0BL,KAA1B,KAAoCa,WAHtC,EAIE;AACA,eAAOb,KAAP;AACD,OAND,MAMO;AACL,eAAO,EAAP;AACD;AACF;;;;;;AAGHP,KAAKgB,SAAL,GAAiB;AACfK,UAAQ,CADO;AAEfJ,gBAAc,CAFC;AAGfE,uBAAqB,CAHN;AAIfG,eAAa,CAJE;AAKfC,cAAY,CALG;AAMfC,gBAAc,CANC;AAOfC,cAAY,CAPG;AAQfC,gBAAc,CARC;AASfC,gBAAc,CATC;AAUfC,oBAAkB;AAVH,CAAjB;;AAaAC,OAAOC,OAAP,GAAiB9B,IAAjB","file":"Path.js","sourcesContent":["/**\n * @author Dmitriy Bizyaev\n */\n\n'use strict';\n\nconst { INVALID_ID } = require('./constants');\n\nconst SEPARATOR = '\\n';\n\nclass Path {\n  constructor(steps = []) {\n    this._steps = steps;\n  }\n\n  extend(step) {\n    if (Array.isArray(step)) {\n      return new Path([...this._steps, ...step]);\n    } else {\n      return new Path([...this._steps, step]);\n    }\n  }\n\n  serialize() {\n    return this._steps.map(step => step.value).join(SEPARATOR);\n  }\n\n  _getFirstValue(type, defaultValue) {\n    const ret = { position: -1, value: defaultValue };\n\n    for (let i = 0; i < this._steps.length; i++) {\n      if (this._steps[i].type === type) {\n        ret.position = i;\n        ret.value = this._steps[i].value;\n        break;\n      }\n    }\n\n    return ret;\n  }\n\n  getComponentId() {\n    return this._getFirstValue(Path.StepTypes.COMPONENT_ID, INVALID_ID).value;\n  }\n\n  getPropName(isSystemProp = false) {\n    const { position, value } = this._getFirstValue(\n      Path.StepTypes.COMPONENT_PROP_NAME,\n      ''\n    );\n\n    const switchValue = isSystemProp ? 'systemProps' : 'props';\n\n    if (\n      position > 0 &&\n      this._steps[position - 1].type === Path.StepTypes.SWITCH &&\n      this._steps[position - 1].value === switchValue\n    ) {\n      return value;\n    } else {\n      return '';\n    }\n  }\n}\n\nPath.StepTypes = {\n  SWITCH: 0,\n  COMPONENT_ID: 1,\n  COMPONENT_PROP_NAME: 2,\n  ARRAY_INDEX: 3,\n  OBJECT_KEY: 4,\n  ACTION_INDEX: 5,\n  METHOD_ARG: 6,\n  MUTATION_ARG: 7,\n  FUNCTION_ARG: 8,\n  ROUTE_PARAM_NAME: 9,\n};\n\nmodule.exports = Path;\n"]}