{"version":3,"sources":["../lib/generatePackageJSONFile.js"],"names":["npa","require","v","generatePackageJSONFile","model","version","packageJSON","name","project","description","author","license","private","dependencies","react","scripts","start","build","test","eject","componentLibs","forEach","lib","rawSpec","usingGraphQL","JSON","stringify","module","exports"],"mappings":"AAAA;;;;AAIA;;AAEA,IAAMA,MAAMC,QAAQ,iBAAR,CAAZ;AACA,IAAMC,IAAID,QAAQ,YAAR,CAAV;;AAEA;;;;;;AAMA,IAAME,0BAA0B,SAA1BA,uBAA0B,CAACC,KAAD,EAAuC;AAAA,iFAAP,EAAO;AAAA,0BAA7BC,OAA6B;AAAA,MAA7BA,OAA6B,gCAAnB,OAAmB;;AACrE,MAAMC,cAAc;AAClBC,UAAMH,MAAMI,OAAN,CAAcD,IADF;AAElBE,iBAAa,oBAFK;AAGlBJ,oBAHkB;AAIlBK,YAAQN,MAAMI,OAAN,CAAcE,MAJJ;AAKlBC,aAAS,YALS;AAMlBC,aAAS,IANS;AAOlBC,kBAAc;AACZC,aAAOZ,EAAE,OAAF,CADK;AAEZ,mBAAaA,EAAE,WAAF,CAFD;AAGZ,sBAAgBA,EAAE,cAAF,CAHJ;AAIZ,0BAAoBA,EAAE,kBAAF,CAJR;AAKZ,uBAAiBA,EAAE,eAAF,CALL;AAMZ,2BAAqBA,EAAE,mBAAF;AANT,KAPI;AAelBa,aAAS;AACPC,aAAO,qBADA;AAEPC,aAAO,qBAFA;AAGPC,YAAM,gCAHC;AAIPC,aAAO;AAJA;AAfS,GAApB;;AAuBAf,QAAMI,OAAN,CAAcY,aAAd,CAA4BC,OAA5B,CAAoC,eAAO;AAAA,eACfrB,IAAIsB,GAAJ,CADe;AAAA,QACjCf,IADiC,QACjCA,IADiC;AAAA,QAC3BgB,OAD2B,QAC3BA,OAD2B;;AAEzCjB,gBAAYO,YAAZ,CAAyBN,IAAzB,IAAiCgB,OAAjC;AACD,GAHD;;AAKA,MAAInB,MAAMoB,YAAV,EAAwB;AACtBlB,gBAAYO,YAAZ,CAAyB,eAAzB,IAA4CX,EAAE,eAAF,CAA5C;AACAI,gBAAYO,YAAZ,CAAyB,cAAzB,IAA2CX,EAAE,cAAF,CAA3C;AACAI,gBAAYO,YAAZ,CAAyB,kBAAzB,IAA+CX,EAAE,kBAAF,CAA/C;AACAI,gBAAYO,YAAZ,CAAyB,uBAAzB,IAAoDX,EAClD,uBADkD,CAApD;AAGAI,gBAAYO,YAAZ,CAAyB,aAAzB,IAA0CX,EAAE,aAAF,CAA1C;AACAI,gBAAYO,YAAZ,CAAyB,qBAAzB,IAAkDX,EAAE,qBAAF,CAAlD;AACD;;AAED,SAAOuB,KAAKC,SAAL,CAAepB,WAAf,EAA4B,IAA5B,EAAkC,CAAlC,CAAP;AACD,CAzCD;;AA2CAqB,OAAOC,OAAP,GAAiBzB,uBAAjB","file":"generatePackageJSONFile.js","sourcesContent":["/**\n * @author Dmitriy Bizyaev\n */\n\n'use strict';\n\nconst npa = require('npm-package-arg');\nconst v = require('./versions');\n\n/**\n *\n * @param {JssyProjectModel} model\n * @param {string} [version='1.0.0']\n * @return {string}\n */\nconst generatePackageJSONFile = (model, { version = '1.0.0' } = {}) => {\n  const packageJSON = {\n    name: model.project.name,\n    description: 'App made with jssy',\n    version,\n    author: model.project.author,\n    license: 'UNLICENSED',\n    private: true,\n    dependencies: {\n      react: v('react'),\n      'react-dom': v('react-dom'),\n      'react-router': v('react-router'),\n      'react-router-dom': v('react-router-dom'),\n      'react-scripts': v('react-scripts'),\n      'styled-components': v('styled-components'),\n    },\n    scripts: {\n      start: 'react-scripts start',\n      build: 'react-scripts build',\n      test: 'react-scripts test --env=jsdom',\n      eject: 'react-scripts eject',\n    },\n  };\n\n  model.project.componentLibs.forEach(lib => {\n    const { name, rawSpec } = npa(lib);\n    packageJSON.dependencies[name] = rawSpec;\n  });\n\n  if (model.usingGraphQL) {\n    packageJSON.dependencies['apollo-client'] = v('apollo-client');\n    packageJSON.dependencies['react-apollo'] = v('react-apollo');\n    packageJSON.dependencies['apollo-link-http'] = v('apollo-link-http');\n    packageJSON.dependencies['apollo-cache-inmemory'] = v(\n      'apollo-cache-inmemory'\n    );\n    packageJSON.dependencies['graphql-tag'] = v('graphql-tag');\n    packageJSON.dependencies['apollo-link-context'] = v('apollo-link-context');\n  }\n\n  return JSON.stringify(packageJSON, null, 2);\n};\n\nmodule.exports = generatePackageJSONFile;\n"]}